# Руководство администратора

## Вход
- Откройте frontend админ-панели и войдите с настроенными учетными данными администратора.
- Интерфейс админки построен на `refine` + Ant Design: типовые CRUD-экраны используют единый data/auth/access слой.

## Разделы панели
- Dashboard
- Users (только `superadmin/admin`)
- Promotions / News / Deliveries
- Mailings (мастер 4 шага)
- Analytics (users/mailings/content/conversions + cohort)
- Settings (только `superadmin`)
- Logs (только `superadmin/admin`)
- Admins (только `superadmin`)

## Управление пользователями
- Используйте табличный CRUD-интерфейс (`list/create/edit/delete`) с маршрутами `users/*`.
- Экспортируйте пользователей в CSV из UI.

## Управление контентом
- Для акций/новинок/приходов доступны создание, редактирование, удаление.
- Указывайте тип аудитории (`horeca`, `retail`, `all`) и дату публикации.
- Проверяйте медиа через upload endpoint (валидация размера/MIME/расширения/сигнатуры).
- **Медиа в боте:** чтобы картинки и видео из контента отображались в Telegram, серверу Telegram нужен доступ по URL файла. При запуске в Docker в `.env` задайте **UPLOAD_PUBLIC_BASE_URL** — адрес без пути (например `http://ВАШ_IP:8000` для API или `http://ВАШ_IP:9000` для MinIO). Без этого URL с `localhost` не открываются для Telegram, и медиа в боте не показываются.

## Рассылки
- Используйте wizard 4 шага: аудитория -> контент -> тест/предпросмотр -> schedule/скорость/подтверждение.
- Используйте контент: текст + optional media (photo/video).
- Поддерживаются test-send, отложенные рассылки, предпросмотр и подтверждение отправки.
- При необходимости отменяйте или повторяйте отправку, проверяйте open rate и CTR.

## Настройки и резервные копии
- Редактируйте key-value настройки в разделе `Settings`.
- Создавайте backup настроек и скачивайте сохраненные JSON-файлы.
- Настраивайте backup policy (schedule + retention) и выполняйте restore (dry-run / apply).

## Управление администраторами
- Экран `Admins` позволяет создавать админов, менять роль, активировать/деактивировать и удалять учетные записи.
- Все операции доступны только `superadmin`.

## Аналитика и логи
- Используйте `Analytics` для ключевых метрик пользователей/контента/рассылок.
- Экспортируйте analytics и logs в CSV.
- Экран `Logs` реализован через refine-resource и поддерживает ролевой доступ на уровне UI + API.
